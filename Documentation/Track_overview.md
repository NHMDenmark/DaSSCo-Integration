| Name | Type of field | Part of which document | Description | Why do we have this field | Populated by whom and when | Updated where and when |
| --- | --- | --- | --- | --- | --- | --- |
| available_for_services | String | Track | Flag from the validation enum list. Used for letting micro services running on the integration server know if the asset is available. When set to PAUSED the asset_paused_status_handler service will keep track of the asset and return it to available once a set amount of time has passed. | Allowing integration server to pause an asset while something is being handled or waiting for a third party service fex. | Integration server upon creation. | Integration server, when an asset should be made/not made available for the services. |
| available_for_services_timestamp | Datetime | Track | Timestamp telling when an asset had its "available_for_services" status changed from YES to PAUSED. | Allows for automatic checking of an asset and its status after a set amount of time has passed. | Integration server when an asset changes from available to paused. | Integration server when an asset has its "available_for_services" status changed. |
| available_for_services_wait_time | Integer | Track | Set amount of time in seconds an asset will be paused. | Allows configuring the amount of time necessary for other things to happen before unpausing. | Integration server service when asset is paused. | Reset when unpaused. |
| ars_link | String | Track | Part of the objects populating the file_list. It is the file objects http link to its file share location. It is sent to the hpc server so the file can be retrieved from the file share. | So we can send it to the hpc server. | Integration server when a file has been uploaded to the file share. | Integration server. When an assets file share is reopened. |
| asset_size | Integer | Track | Keeps track of the total size of an assets files. It is computed from the individual file sizes that belong to an asset. | We need to know how much space to request when opening a file share for an asset. | Integration server. When the asset is received. | Integration server. Whenever a new file is added to the asset or a file is deleted from the asset. |
| asset_type | String | Track | Notes the type of asset we are dealing with. Uses the asset type enum list. Values can be: UNKNOWN, DEVICE_TARGET, LABEL and SPECIMEN. Unknown is used before the barcode is read and the asset subject has been found from the datamatrix. | The field helps us know if special changes needs to be made to the jobs for the asset. Fex when an asset is discovered to be a device target we dont want to process this asset any further. | Integration server. When the asset is received. | Integration server. When the barcode is read and the asset_subject field gets updated. |
| batch_list_name | String | Track | Comprised of workstation name and the date the asset was digitised. | Used for knowing which assets can be part of the same MOS. It is assumed that any MOS will be digitised the same day and at the same workstation. | Integration server. When the asset is received. | Never |
| check_sum | String | Track | Part of the file object populating the file_list. A crc calculated check sum for a file. | To be able to check that a file has been correctly transferred between servers. | Integration server. When a new asset is received or when a new file is received. | Never |
| created_timestamp | String | Track | Internal timestamp for when the document was added to the track database. | In case we want to reconstruct a timeline for an asset. | Integration server when an asset is received. | Never |
| deleted | Boolean | Track | Part of the file object populating the file_list. Tells if the file has been deleted from the asset. | To keep track of files belonging to an asset. | Integration server when an asset is received or when a new file is added to an asset. | Integration server. When the file is deleted from the asset. |
| erda_sync | String | Track | This can be part of the file object populating the file_list or it can be the field for the entire document. The part for the file object tells if the specific file has been synced with Erda at some point. The general field shows what the overall status for the sync is- if there are any files that has not been synced the status will be negative and if every file has been synced it will be a positive. | To keep track of whether files belonging to an asset has been synced with Erda. | Integration server. When an asset is received and for each file also whenever a new file is added to the asset. | Whenever an asset is synced with Erda or when a new file is received. |
| files_status | String | Track | Tells the overall status for all files belonging to an asset. | Nice to have field in case there is an error with files belonging to an asset. | Integration server when an asset is received. | Unknown - we have not implemented error handling yet. |
| file_list | Array | Track | This is an array containing the file objects. | It allows for an asset to have multiple different files attached to it. | Integration server. When an asset is received. | When a new file is added to an asset. |
| file_size | Integer | Track | Part of the file object populating the file_list. This is the file size in mb of the file. | We need to know the size for when we want to open a file share. | Integration server. When an asset is received or a new file is added to an asset. | Never |
| has_new_file | String, from the validate enum | Track | Tells if an asset has new files that have not yet been uploaded to ARS or added to the file_list. | To keep track of when an asset has files that have not been persisted yet. | Integration server when the asset is received. | Whenever a new file is received or a file has been uploaded to ARS. |
| has_open_share | String, from the validate enum | Track | Shows whether an asset currently has an open file share. | It is very important that we do not open multiple file shares for an asset. This will crash the file share and the asset files/ and the file share will be unable to be accessed, updated or synced. | Integration server. When the asset is received. | Intgration server. Whenever the assets fileshare is created, opened, deleted or the asset is synced with Erda. |
| hpc_job_id | Integer | Track | Part of the job object populating the job_list. This is the job id given a job on the hpc server when a job is queued.  Default value is -9 before a job has been queued on the hpc cluster. | In case we need to go back and check when something goes wrong on the hpc server. | Integration server. When an asset is received. | Integration server. When receiving new information on a specific job from the hpc server scripts through the hpc api. |
| hpc_ready | String, from the validate enum | Track | This tells whether an asset has had its files succesfully moved onto the hpc server. | We need to know this before we start running processes on the asset on the hpc server. | Integration server. When an asset is received. | Integration server. When receiving information from the hpc server through the hpc api that the asset files have been moved to the hpc server. |
| is_in_ars | String, from the validate enum | Track | Shows whether the asset has been "created" in ARS through the api. | It lets us know if the metadata has been persisted in ARS. | Integration server when an asset is received. | Integration server. When using the create asset endpoint. |
| jobs_status | String, from the status enum | Track | Uses the status enum to show the overall status for the job flow. Most active job defines the status. | This lets us keep track of the overall progression of the jobs/processes an asset needs to go through with on the hpc server. | Integration server. When the asset is received. | Integration server. Whenever a job changes its status this will check if the overall status also needs to change. |
| job_list | Array | Track | Contains the job objects for each asset. | It allows for an asset to have multiple different jobs/processes it needs to go through. | Integration server. When the asset is received. | Never - this will change at some point in the future. |
| job_start_time | Datetime | Track | Part of the job object populating the job_list. Tells when a job started on the hpc server. | To keep track of how many ressources we can expect similar jobs to need. | Integration server. When a job starts on the hpc server. | Never |
| name | String | Track | Can be either part of the job object populating the job_list or part of the file object populating the file_list. Its the name of the object. | It let us know which object we are working with. | Integration server. When an asset is received. A new file is added to an asset. In the future if new jobs get added to an asset. | Never |
| pipeline | String | Track | The pipeline name of the asset. | It makes life easier for the programmers when they want to construct unique identifiers, and add jobs to the job list. It is not strictly needed since it could be found from the metadata asset database also. | Integration server when the asset is received. | Never |
| priority | Integer | Track | Part of the job object populating the job_list. Used for knowing in which order job scripts are called. Job order is set in the pipeline_job_config file. Jobs with the same priority will be run in parallel on the hpc server. The lowest priority number will run before first. | It allows us to control in which order pipeline jobs are run. | Integration server. When the job list is populated. | Never |
| proxy_path | String | Track data | Path to the current open file proxy share. | We need it to let other services know where to upload files belonging to the asset. | Integration server. Starts out empty when the asset is created. | When a share is opened/closed/synced the integration server updates the field. |
| status | String from the status enum | Track | Part of the job object populating the job_list. Uses the status enum to show status of an individual job. | It lets us keep track of each jobs status. | Integration server. When the jobs list is populated. | Integration server. When a job is queued, started, finished or some kind of error occurs. This will be communicated to the integration server via the hpc api from the hpc server. |
| temporary_files_local | String | Track data | A status telling us if the asset has files on the ingestion server. | It lets us check if there are files that should be deleted once an asset is done being processed. | Integration server when the asset files are being processed. | Does not get updated but it gets deleted at the end of the pipeline. |
| temporary_files_ndrive | String | Track data | A status telling us if the asset has files on the ndrive. | It lets us check if there are files that should be deleted once an asset is done being processed. | Integration server when the asset files are being processed. | Does not get updated but it gets deleted at the end of the pipeline. |
| temporary_path_local | String | Track data | Path to the local directory for an asset. Being a temporary field this will get deleted once the asset has finished processing. | It lets us know where to find an asset on the integration server while the asset is being processed. | Integration server when the asset files are being processed. | Does not get updated but it gets deleted at the end of the pipeline. |
| temporary_path_ndrive | String | Track data | Path to the ndrive directory where an assets files are. Being a temporary field this will get deleted once the asset has finished processing. | It lets us know where to find an asset on the ndrive so it is easier to delete after the processing is done. It also allows us to easier restore an asset if somethign goes wrong. | Integration server when the asset files are being processed. | Does not get updated but it gets deleted at the end of the pipeline. |
| time_added | Datetime | Track | Part of the file object populating the file_list. This shows the time the file was added to the asset from the integration servers point of view. Typically when the asset is received. | Let us track when a file belonging to an asset was added. | Integration server. When a file object is added to the file_list. | Never |
| type | String | Track | Part of the file object populating the file_list. This is the file extension of the file(tif, jpg etc). | It lets us know what kind of file we have. This could be important for jobs on the hpc server. | Integration server. When the file_list is populated with a file object. | Never |
| update_metadata | String from the validate enum | Track | Uses the validate enum to show if an asset needs to have its metadata updated via the storage api. | Lets us keep track of whether the metadata has been updated through ARS yet. | Integration server. When asset is received. | Integration server. When the metadata receives an update or the metadata has been updated through the storage api. |
| _id | String | Track | This is the unique identifier for the document | It is a requirement for having a document in a database | Populated by the integration server when it receives a new asset | Never - its unique and cannot be changed |
